<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>

  <script>
    //USAR SOLO CLASE ARRAY
    function validarDNI(dni) {
      if (dni === null) {//si es null, es decir, se ha pulsado cancelar devuelve falso y sale de la función.
        return false;
      }
      if (dni == "") {//si el dni es una cadena vacía devuelve falso y sale de la función
        return false;
      }


      var letras = "TRWAGMYFPDXBNJZSQVHLCKET";
      var letrasminusculas="trwagmyfpdxbnjzsqvhlcket"
      var array_letras = letras.split("");//cadena de letras convertida a array
      var array_letrasminusculas=letrasminusculas.split("");//convertimos la cadena de letras minúsculas a array
      var array_dni = dni.split("");//dni convertido en array
      var parteNumerica = array_dni.slice(0, 8);//parte numérica en forma de array
      var parteNumericaNum = parseInt(parteNumerica.join(""));//parte numerica convertida a una variable numérica



      if (array_dni.length != 9) {//si la longitud del array dni es 9 devuelve false y sale de la función.
        return false;
      }
      for (var i = 0; i < parseInt(parteNumerica.length); i++) {//recorremos el array con la parte numérica
        if (isNaN(parteNumerica[i])) {//si alguno de sus 8 elementos no es un numero devuelve false
          return false;
        }
      }
      if (!isNaN(array_dni[8])) {//si la posicion de la letra es numero devuelve false y sale de la función
        document.write(array_dni[8]);
        return false;
      }


      if (array_letras[parteNumericaNum % 23] == array_dni[8]||(array_letrasminusculas[parteNumericaNum % 23] == array_dni[8] )) { // si el índice del array de letras mayúsculas ó minúsculas que corresponde al resto de la parte numérica entre 23 es igual a la letra del dni introducido en mayúsculas devuelve true.
        return true
      } else {//si no se cumple esto, devuelve false y sa sale de la función.
        return false;
      }



    }
  </script>
</head>

<body>
  <script>

    do {
      var dni = validarDNI(prompt("Introduce un DNI válido"));
    } while (dni == false);

    if (dni == true) {
      alert("¡DNI CORRECTO!")
    }


  </script>
</body>
</html>
